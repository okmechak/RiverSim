<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RiverSim: io.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="riversim_logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RiverSim
   &#160;<span id="projectnumber">2.6.0</span>
   </div>
   <div id="projectbrief">River Simulation Program</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5fc0168d11760b9445bd29fa15d9290f.html">dev</a></li><li class="navelem"><a class="el" href="dir_f0a4ec96a82b60bf0c8435c1c452efce.html">riversim</a></li><li class="navelem"><a class="el" href="dir_ea10287745709d215d39b27087a55ef8.html">source</a></li><li class="navelem"><a class="el" href="dir_7e3402869676252533f65bfb00bc539f.html">river</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">io.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains functionality to read and write state of program(simulation data) and program options.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="border_8hpp_source.html">border.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="physmodel_8hpp_source.html">physmodel.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tree_8hpp_source.html">tree.hpp</a>&quot;</code><br />
<code>#include &quot;cxxopts.hpp&quot;</code><br />
<code>#include &quot;<a class="el" href="utilities_8hpp_source.html">utilities.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for io.hpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="io_8hpp__incl.svg" width="550" height="262"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="io_8hpp__dep__incl.svg" width="115" height="187"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="io_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceRiver"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceRiver.html">River</a></td></tr>
<tr class="memdesc:namespaceRiver"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="namespaceRiver.html" title="River namespace holds everything that is related to River simulation. ">River</a> namespace holds everything that is related to <a class="el" href="namespaceRiver.html" title="River namespace holds everything that is related to River simulation. ">River</a> simulation. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:affa8f88114842f27d0a7b829d69120cf"><td class="memItemLeft" align="right" valign="top">cxxopts::ParseResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceRiver.html#affa8f88114842f27d0a7b829d69120cf">River::process_program_options</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:affa8f88114842f27d0a7b829d69120cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processing of program options.  <a href="namespaceRiver.html#affa8f88114842f27d0a7b829d69120cf">More...</a><br /></td></tr>
<tr class="separator:affa8f88114842f27d0a7b829d69120cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a258a7b67f297e975438b5b805cc0a932"><td class="memItemLeft" align="right" valign="top"><a id="a258a7b67f297e975438b5b805cc0a932"></a>
Model &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceRiver.html#a258a7b67f297e975438b5b805cc0a932">River::SetupModelParamsFromProgramOptions</a> (const cxxopts::ParseResult &amp;vm, Model &amp;mdl)</td></tr>
<tr class="memdesc:a258a7b67f297e975438b5b805cc0a932"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes <a class="el" href="classRiver_1_1Model.html" title="Physical model parameters. ">River::Model</a> object by Program Options values. <br /></td></tr>
<tr class="separator:a258a7b67f297e975438b5b805cc0a932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eed247d78b015bf1e1565effc34eb49"><td class="memItemLeft" align="right" valign="top"><a id="a4eed247d78b015bf1e1565effc34eb49"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceRiver.html#a4eed247d78b015bf1e1565effc34eb49">River::Save</a> (const Model &amp;mdl, const Timing &amp;time, const Border &amp;border, const Rivers &amp;tr, const GeometryDifference &amp;gd, const string file_name, const string input_file=&quot;&quot;)</td></tr>
<tr class="memdesc:a4eed247d78b015bf1e1565effc34eb49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save current state of program which includes Geometry(Rivers, Border), current model parameters(Model) and backward simulation data(GeometryDifference). <br /></td></tr>
<tr class="separator:a4eed247d78b015bf1e1565effc34eb49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc14507125d8c05e31b884f0ed16408a"><td class="memItemLeft" align="right" valign="top"><a id="adc14507125d8c05e31b884f0ed16408a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceRiver.html#adc14507125d8c05e31b884f0ed16408a">River::Open</a> (Model &amp;mdl, Border &amp;border, Rivers &amp;tr, GeometryDifference &amp;gd, string file_name, bool &amp;q_update_border)</td></tr>
<tr class="memdesc:adc14507125d8c05e31b884f0ed16408a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens state of program from json file which includes Geometry(Rivers, Border) and current model parameters(Model). <br /></td></tr>
<tr class="separator:adc14507125d8c05e31b884f0ed16408a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>There is few options to communicate with the program. First one is program options, like <code>./riversim --number-of-steps=10</code> etc. To see full list of options and its description see <code>./riversim --help</code>. Second one option is using json file. Json file produced by the program can be used as input. Save/Open parameters of model, border and tree to/from file.</p>
<h2>json file format</h2>
<p>json file contains next objects:</p>
<ul>
<li><code>Model</code>(in* / out)</li>
<li><code>Border</code>(in* / out)</li>
<li><code>Trees</code>(in* / out)</li>
<li><code>GeometryDifference</code>(out)</li>
<li><code>RuntimeInfo</code>(out)</li>
</ul>
<p><b>in*</b> - means that it is optional input object. <b>out</b> - output contains this information.</p>
<dl class="section note"><dt>Note</dt><dd>"Trees" can't be specified without <code>Border</code> object.</dd></dl>
<p>Lets describe each of them.</p>
<h2>Model</h2>
<p>Model object contains all simulation model parameters. They are well descibed in <code>riversim --help</code>.</p>
<p>Model consist of three objects and fields. Fields description you can find here <a class="el" href="classRiver_1_1Model.html" title="Physical model parameters. ">River::Model</a>.</p>
<ul>
<li><code>Integration</code> - parameters used for integration around river tips. <dl class="section see"><dt>See also</dt><dd><a class="el" href="classRiver_1_1IntegrationParams.html" title="Holds parameters used by integration of series paramets functionality(see River::Solver::integrate())...">River::IntegrationParams</a></dd></dl>
</li>
<li><code>Mesh</code> - parameters used for mesh generation and densening triangle size around river tips. <dl class="section see"><dt>See also</dt><dd><a class="el" href="classRiver_1_1MeshParams.html" title="Adaptive mesh area constraint function. ">River::MeshParams</a></dd></dl>
</li>
<li><code>Solver</code> - parameters used by Deal.II solver. <dl class="section see"><dt>See also</dt><dd><a class="el" href="classRiver_1_1SolverParams.html" title="Holds All parameters used in Deal.II solver. ">River::SolverParams</a></dd></dl>
<h3>Example</h3>
</li>
</ul>
<p>All model parameters(version 2.4.1)</p>
<div class="fragment"><div class="line">&quot;Model&quot;: {</div><div class="line">    &quot;Integration&quot;: {</div><div class="line">        &quot;exponant&quot;: 2.0,</div><div class="line">        &quot;radius&quot;: 0.03,</div><div class="line">        &quot;weightRadius&quot;: 0.01</div><div class="line">    },</div><div class="line">    &quot;Mesh&quot;: {</div><div class="line">        &quot;eps&quot;: 1e-06,</div><div class="line">        &quot;exponant&quot;: 7.0,</div><div class="line">        &quot;maxArea&quot;: 100000.0,</div><div class="line">        &quot;maxEdge&quot;: 1.0,</div><div class="line">        &quot;minAngle&quot;: 30.0,</div><div class="line">        &quot;minArea&quot;: 7e-08,</div><div class="line">        &quot;minEdge&quot;: 8e-08,</div><div class="line">        &quot;ratio&quot;: 2.3,</div><div class="line">        &quot;refinmentRadius&quot;: 0.04,</div><div class="line">        &quot;sigma&quot;: 1.9,</div><div class="line">        &quot;staticRefinmentSteps&quot;: 3</div><div class="line">    },</div><div class="line">    &quot;Solver&quot;: {</div><div class="line">        &quot;adaptiveRefinmentSteps&quot;: 0,</div><div class="line">        &quot;iterationSteps&quot;: 6000,</div><div class="line">        &quot;quadratureDegree&quot;: 3,</div><div class="line">        &quot;refinmentFraction&quot;: 0.1,</div><div class="line">        &quot;tol&quot;: 1e-12</div><div class="line">    },</div><div class="line">    &quot;bifurcationAngle&quot;: 0.6283185307179586,</div><div class="line">    &quot;bifurcationMinDistance&quot;: 0.05,</div><div class="line">    &quot;bifurcationThreshold&quot;: -0.1,</div><div class="line">    &quot;bifurcationThreshold2&quot;: 0.001,</div><div class="line">    &quot;bifurcationType&quot;: 0,</div><div class="line">    &quot;boundaryCondition&quot;: 0,</div><div class="line">    &quot;boundaryIds&quot;: [</div><div class="line">        1,</div><div class="line">        2,</div><div class="line">        3,</div><div class="line">        4</div><div class="line">    ],</div><div class="line">    &quot;ds&quot;: 0.003,</div><div class="line">    &quot;dx&quot;: 0.2,</div><div class="line">    &quot;eta&quot;: 1.0,</div><div class="line">    &quot;fieldValue&quot;: 1.0,</div><div class="line">    &quot;growthMinDistance&quot;: 0.01,</div><div class="line">    &quot;growthThreshold&quot;: 0.0,</div><div class="line">    &quot;growthType&quot;: 0,</div><div class="line">    &quot;height&quot;: 1.0,</div><div class="line">    &quot;riverBoundaryId&quot;: 4,</div><div class="line">    &quot;width&quot;: 1.0</div><div class="line">}</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>If some fieds of Model Object are ommited then they will be replaced by default values. Even empty Model can be specified: <div class="fragment"><div class="line">Model: {}</div></div><!-- fragment --></dd></dl>
<h2>Border</h2>
<p>Border contains information about <a class="el" href="classRiver_1_1Border.html" title="Handles initial boundary geometry without any geometry of river itself and contains info about source...">River::Border</a> class, which specifies border points, connections between them and source points.</p>
<p>Border has next fields</p><ul>
<li><code>coords</code> - vector of border coordinates. <dl class="section see"><dt>See also</dt><dd><a class="el" href="classRiver_1_1Border.html#a3b445917e853cd9e02ef03cc3c4f6945" title="Vertices of border in counterclockwise order. ">River::Border::vertices</a></dd></dl>
</li>
<li><code>lines</code> - vector of border lines and its id. Id handles boundary condition: 0 - zero Direchlet, 1 - Laplacea zero flow. <dl class="section see"><dt>See also</dt><dd><a class="el" href="classRiver_1_1Border.html#aa220dae8c7316b103d9138bbfbd71724" title="Lines of borders between vertices. ">River::Border::lines</a></dd></dl>
</li>
<li><code>SourceIds</code> - contains pairs of source id number and coordinate position number in "coords" vector.</li>
</ul>
<h3>Example</h3>
<p>Rectangular border with one source:</p>
<div class="fragment"><div class="line">&quot;Border&quot;: {</div><div class="line">    &quot;SourceIds&quot;: [</div><div class="line">        [ 1, 4 ]</div><div class="line">        ],</div><div class="line">    &quot;coords&quot;: [</div><div class="line">        [ 1.0, 0.0 ],</div><div class="line">        [ 1.0, 1.0 ],</div><div class="line">        [ 0.0, 1.0 ],</div><div class="line">        [ 0.0, 0.0 ],</div><div class="line">        [ 0.2, 0.0 ]</div><div class="line">    ],</div><div class="line">    &quot;lines&quot;: [</div><div class="line">        [ 0, 1, 1 ],</div><div class="line">        [ 1, 2, 2 ],</div><div class="line">        [ 2, 3, 3 ],</div><div class="line">        [ 3, 4, 4 ],</div><div class="line">        [ 4, 0, 4 ]</div><div class="line">    ]</div><div class="line">}</div></div><!-- fragment --><h2>Trees</h2>
<p>Trees structure is representation of <a class="el" href="classRiver_1_1Tree.html" title="Combines Branch into tree like structure. ">River::Rivers</a> object. This structure contains information about river network geometry, its separate branches(River::Branch) and relationship between them.</p>
<p>It contains next objects:</p>
<ul>
<li><code>Branches</code> - vector of <code>branches</code> objects.</li>
<li>"Relations" - vector of three element items. First number indicates source branch id, second - left branch id, third - right branch id.</li>
<li>"SourceIds" - holds source branches.</li>
</ul>
<h3><code>Branches</code></h3>
<p>For details about <code>Branch</code> object see <a class="el" href="classRiver_1_1BranchNew.html" title="Holds all functionality that you need to work with single branch. ">River::Branch</a>. Each <code>Branch</code> consists of next objects:</p>
<ul>
<li>"coords" - coordintates of branch. See <a class="el" href="classRiver_1_1BranchNew.html#a6c94d0388c0927d986d3a59bf4311c66" title="Vector which holds all points of branch. ">River::Branch::points</a>.</li>
<li>"sourceAngle" - direction of growth of source point branch. See <a class="el" href="classRiver_1_1BranchNew.html#aa09b22ab98c64dadbee6e8e9de1d9dcd" title="Initial angle of source(or direction of source). ">River::Branch::source_angle</a>.</li>
<li>"id" - unique number which is referenced by <code>Rivers:Relations</code> object.</li>
</ul>
<h4>Branch Example</h4>
<div class="fragment"><div class="line">{</div><div class="line">    coords: [</div><div class="line">        [ 0.15392550378286424, 0.8574775565643402 ],</div><div class="line">        [ 0.15385809127830358, 0.8576768672025086 ],</div><div class="line">        [ 0.15379076781691314, 0.8578758571295332 ]</div><div class="line">    ],</div><div class="line">    &quot;id&quot;: 9,</div><div class="line">    &quot;sourceAngle&quot;: 1.8695242272923212,</div><div class="line">    &quot;sourcePoint&quot;: [ 0.15392550378286424, 0.8574775565643402 ]</div><div class="line">}</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><code>sourcePoint</code> and first element of <code>coords</code> are the same.</dd></dl>
<h3>Example</h3>
<div class="fragment"><div class="line">&quot;Trees&quot;: {</div><div class="line">    &quot;Branches&quot;: [{&lt;branch1&gt;, &lt;branch2&gt;, ... &lt;branchN&gt;}],</div><div class="line">    &quot;Relations&quot;: &quot;Relations&quot;: [</div><div class="line">        [ 1, [ 2, 3 ] ],</div><div class="line">        [ 2, [ 4, 5 ] ],</div><div class="line">        [ 3, [ 6, 7 ] ]</div><div class="line">    ],</div><div class="line">    &quot;SourceIds&quot; : [1]</div><div class="line">}</div></div><!-- fragment --><h2>GeometryDifference</h2>
<p>Obcjects:</p>
<ul>
<li>"AlongBranches" - contains information about difference allong branches.</li>
<li>"BiffuractionPoints" - contains geometry difference at biffuratcion points.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structRiver_1_1GeometryDifference.html" title="This structure holds comparsion data from Backward river simulation. ">River::GeometryDifference</a></dd></dl>
<h2>RuntimeInfo</h2>
<p>Object holds some general information and perfomance measurments. Like total time of simulation, time of each cycle, start date, end date and input file.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classRiver_1_1Timing.html" title="Timing is used for measuring time of each evaluation cycle and whole program simulation time...">River::Timing</a></dd></dl>
<h2><a href="https://github.com/okmechak/RiverSim/blob/master/research/test_tree.json">Example of JSON file output</a></h2>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
